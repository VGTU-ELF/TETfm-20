= {nbsp}{nbsp}{nbsp}{nbsp}{nbsp}{nbsp}Vilniaus Gedimino technikos universitetas

[.text-center]
== Elektronikos fakultetas

=== Kompiuterijos ir ryšių technologijų katedra

{nbsp}

{nbsp}

{nbsp}

{nbsp}

{nbsp}

{nbsp}

=== Debesų kompiuterija
Modulis ELKRM17304

[.text-center]
== Automatizavimas Ansible pagalba

Laboratorinio darbo nr. 4 ataskaita

{nbsp}

{nbsp}

{nbsp}

{nbsp}

{nbsp}

{nbsp}

[.text-right]
**Atliko:** TETfm-20 grupės magistrantas +
                       Saulius Krasuckas +
**Tikrino:** lekt. dr. Liudas Duoba

{nbsp}

{nbsp}

{nbsp}

{nbsp}

{nbsp}

{nbsp}

{nbsp}

VILNIUS, 2022

<<<



{nbsp}

[.text-center]
==== Laboratorinis darbas nr. 4

[.text-center]
== Automatizavimas `Ansible` pagalba


{nbsp}

[.text-center]
=== Darbo tikslas

[.text-left]
* Išbandyti `Ansible` įrankį.


[.text-center]
=== Darbo eiga


[.text-left]
==== Įrankių pasiruošimas

Šiuo metu KDV naudoju Windows10.
Darbui pasirinkau terminalo emuliatorių _MinTTY_ ir CLI įrankių sistemą _MSYS2_. Pastaroji Windows OS emuliuoja *nix aplinką.


[.text-left]
==== Prisijungimas prie savo **serverio nr. 1**

Kol laukiau SSH paslaugos pasiekiamumo, tikrinau nurodytą TCP prievadą.
Prisiminiau ir išmėginau kelis būdus:

----
$ ssh 158.129.200.236 45522
ssh: connect to host 158.129.200.236 port 22: Connection timed out
$ 
----


----
$ telnet 158.129.200.236 45522
Trying 158.129.200.236...
^C
$ 
----


----
$ ssh ssh://stud@158.129.200.236:45522
^C
$ 
----

Išskyrus `netcat`, kurį spėjau tik įsidiegti savo klientinėje OS:

----
$ pacman -S openbsd-netcat
resolving dependencies...
looking for conflicting packages...
Packages (1) openbsd-netcat-1.217_2-1
Total Download Size:   0.03 MiB
Total Installed Size:  0.12 MiB

:: Proceed with installation? [Y/n]
:: Retrieving packages...
 openbsd-netcat-1.217_2-1-x86_64                                             35.4 KiB  37.8 KiB/s 00:01 [#############################################################] 100% 
(1/1) checking keys in keyring                                                                          [#############################################################] 100% 
(1/1) checking package integrity                                                                        [#############################################################] 100% 
(1/1) loading package files                                                                             [#############################################################] 100% 
(1/1) checking for file conflicts                                                                       [#############################################################] 100% 
(1/1) checking available disk space                                                                     [#############################################################] 100% 
:: Processing package changes...                                                                                                                                             
(1/1) installing openbsd-netcat                                                                         [#############################################################] 100%
$ 
----

Tuomet SSH paslauga tapo jau pasiekiama..:

----
$ telnet 158.129.200.236 45522
Trying 158.129.200.236...
Connected to 158.129.200.236.
Escape character is '^]'.
SSH-2.0-OpenSSH_8.2p1 Ubuntu-4ubuntu0.3
^]

Connection closed by foreign host.
$ 
----

\... ir prisijungiau prie server nr.1:

----
$ ssh ssh://stud@158.129.200.236:45522
stud@158.129.200.236's password:
Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-90-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Tue 07 Dec 2021 04:31:42 PM UTC

  System load:  0.0                Processes:                229
  Usage of /:   41.0% of 19.56GB   Users logged in:          0
  Memory usage: 9%                 IPv4 address for docker0: 172.17.0.1
  Swap usage:   0%                 IPv4 address for ens160:  10.128.67.8

 * Super-optimized for small spaces - read how we shrank the memory
   footprint of MicroK8s to make it the smallest full K8s around.

   https://ubuntu.com/blog/microk8s-memory-optimisation

41 updates can be applied immediately.
To see these additional updates run: apt list --upgradable


The list of available updates is more than a week old.
To check for new updates run: sudo apt update

Last login: Tue Oct 19 19:27:21 2021 from 81.29.22.28
stud@cc-lab:~$ 
----


[.text-left]
==== Gauto OS atnaujinimas:

----
stud@cc-lab:~$ id
uid=1001(stud) gid=1001(stud) groups=1001(stud),27(sudo)

stud@cc-lab:~$ sudo apt update
[sudo] password for stud:
Hit:1 http://lt.archive.ubuntu.com/ubuntu focal InRelease
Hit:2 http://lt.archive.ubuntu.com/ubuntu focal-updates InRelease
Hit:3 http://lt.archive.ubuntu.com/ubuntu focal-backports InRelease
Hit:4 http://lt.archive.ubuntu.com/ubuntu focal-security InRelease
Reading package lists... Done
Building dependency tree
Reading state information... Done
43 packages can be upgraded. Run 'apt list --upgradable' to see them.
stud@cc-lab:~$ 
----

[.text-left]
==== _Ansible_ įdiegimas:

----
stud@cc-lab:~$ sudo apt install ansible
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following additional packages will be installed:
  ieee-data python3-argcomplete python3-crypto python3-dnspython python3-jmespath python3-kerberos python3-libcloud python3-lockfile python3-netaddr python3-ntlm-auth
  python3-requests-kerberos python3-requests-ntlm python3-selinux python3-winrm python3-xmltodict
Suggested packages:
  cowsay sshpass python-lockfile-doc ipython3 python-netaddr-docs
The following NEW packages will be installed:
  ansible ieee-data python3-argcomplete python3-crypto python3-dnspython python3-jmespath python3-kerberos python3-libcloud python3-lockfile python3-netaddr
  python3-ntlm-auth python3-requests-kerberos python3-requests-ntlm python3-selinux python3-winrm python3-xmltodict
0 upgraded, 16 newly installed, 0 to remove and 43 not upgraded.
Need to get 9,644 kB of archives.
After this operation, 90.2 MB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 http://lt.archive.ubuntu.com/ubuntu focal/main amd64 python3-crypto amd64 2.6.1-13ubuntu2 [237 kB]
Get:2 http://lt.archive.ubuntu.com/ubuntu focal/main amd64 python3-dnspython all 1.16.0-1build1 [89.1 kB]
Get:3 http://lt.archive.ubuntu.com/ubuntu focal/main amd64 ieee-data all 20180805.1 [1,589 kB]
Get:4 http://lt.archive.ubuntu.com/ubuntu focal-updates/main amd64 python3-netaddr all 0.7.19-3ubuntu1 [236 kB]
Get:5 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 ansible all 2.9.6+dfsg-1 [5,794 kB]
Get:6 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 python3-argcomplete all 1.8.1-1.3ubuntu1 [27.2 kB]
Get:7 http://lt.archive.ubuntu.com/ubuntu focal-updates/main amd64 python3-jmespath all 0.9.4-2ubuntu1 [21.5 kB]
Get:8 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 python3-kerberos amd64 1.1.14-3.1build1 [22.6 kB]
Get:9 http://lt.archive.ubuntu.com/ubuntu focal/main amd64 python3-lockfile all 1:0.12.2-2ubuntu2 [14.6 kB]
Get:10 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 python3-libcloud all 2.8.0-1 [1,403 kB]
Get:11 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 python3-ntlm-auth all 1.1.0-1 [19.6 kB]
Get:12 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 python3-requests-kerberos all 0.12.0-2 [11.9 kB]
Get:13 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 python3-requests-ntlm all 1.1.0-1 [6,004 B]
Get:14 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 python3-selinux amd64 3.0-1build2 [139 kB]
Get:15 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 python3-xmltodict all 0.12.0-1 [12.6 kB]
Get:16 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 python3-winrm all 0.3.0-2 [21.7 kB]
Fetched 9,644 kB in 1s (10.9 MB/s)
Selecting previously unselected package python3-crypto.
(Reading database ... 107888 files and directories currently installed.)
Preparing to unpack .../00-python3-crypto_2.6.1-13ubuntu2_amd64.deb ...
Unpacking python3-crypto (2.6.1-13ubuntu2) ...
Selecting previously unselected package python3-dnspython.
Preparing to unpack .../01-python3-dnspython_1.16.0-1build1_all.deb ...
Unpacking python3-dnspython (1.16.0-1build1) ...
Selecting previously unselected package ieee-data.
Preparing to unpack .../02-ieee-data_20180805.1_all.deb ...
Unpacking ieee-data (20180805.1) ...

Progress: [  8%] [###########............................................................................................................................................]

Selecting previously unselected package python3-netaddr.
Preparing to unpack .../03-python3-netaddr_0.7.19-3ubuntu1_all.deb ...
Unpacking python3-netaddr (0.7.19-3ubuntu1) ...
Selecting previously unselected package ansible.
Preparing to unpack .../04-ansible_2.9.6+dfsg-1_all.deb ...
Unpacking ansible (2.9.6+dfsg-1) ...
Selecting previously unselected package python3-argcomplete.
Preparing to unpack .../05-python3-argcomplete_1.8.1-1.3ubuntu1_all.deb ...
Unpacking python3-argcomplete (1.8.1-1.3ubuntu1) ...
Selecting previously unselected package python3-jmespath.
Preparing to unpack .../06-python3-jmespath_0.9.4-2ubuntu1_all.deb ...
Unpacking python3-jmespath (0.9.4-2ubuntu1) ...
Selecting previously unselected package python3-kerberos.
Preparing to unpack .../07-python3-kerberos_1.1.14-3.1build1_amd64.deb ...
Unpacking python3-kerberos (1.1.14-3.1build1) ...
Selecting previously unselected package python3-lockfile.
Preparing to unpack .../08-python3-lockfile_1%3a0.12.2-2ubuntu2_all.deb ...
Unpacking python3-lockfile (1:0.12.2-2ubuntu2) ...
Selecting previously unselected package python3-libcloud.
Preparing to unpack .../09-python3-libcloud_2.8.0-1_all.deb ...
Unpacking python3-libcloud (2.8.0-1) ...
Selecting previously unselected package python3-ntlm-auth.
Preparing to unpack .../10-python3-ntlm-auth_1.1.0-1_all.deb ...
Unpacking python3-ntlm-auth (1.1.0-1) ...
Selecting previously unselected package python3-requests-kerberos.
Preparing to unpack .../11-python3-requests-kerberos_0.12.0-2_all.deb ...
Unpacking python3-requests-kerberos (0.12.0-2) ...
Selecting previously unselected package python3-requests-ntlm.
Preparing to unpack .../12-python3-requests-ntlm_1.1.0-1_all.deb ...
Unpacking python3-requests-ntlm (1.1.0-1) ...
Selecting previously unselected package python3-selinux.
Preparing to unpack .../13-python3-selinux_3.0-1build2_amd64.deb ...
Unpacking python3-selinux (3.0-1build2) ...
Selecting previously unselected package python3-xmltodict.
Preparing to unpack .../14-python3-xmltodict_0.12.0-1_all.deb ...
Unpacking python3-xmltodict (0.12.0-1) ...
Selecting previously unselected package python3-winrm.
Preparing to unpack .../15-python3-winrm_0.3.0-2_all.deb ...
Unpacking python3-winrm (0.3.0-2) ...
Setting up python3-lockfile (1:0.12.2-2ubuntu2) ...
Setting up python3-ntlm-auth (1.1.0-1) ...
Setting up python3-kerberos (1.1.14-3.1build1) ...
Setting up python3-xmltodict (0.12.0-1) ...
Setting up python3-jmespath (0.9.4-2ubuntu1) ...
Setting up python3-requests-kerberos (0.12.0-2) ...
Setting up ieee-data (20180805.1) ...
Setting up python3-dnspython (1.16.0-1build1) ...
Setting up python3-selinux (3.0-1build2) ...
Setting up python3-crypto (2.6.1-13ubuntu2) ...
Setting up python3-argcomplete (1.8.1-1.3ubuntu1) ...
Setting up python3-requests-ntlm (1.1.0-1) ...
Setting up python3-libcloud (2.8.0-1) ...
Setting up python3-netaddr (0.7.19-3ubuntu1) ...
Setting up python3-winrm (0.3.0-2) ...
Setting up ansible (2.9.6+dfsg-1) ...
Processing triggers for man-db (2.9.1-1) ...
stud@cc-lab:~$ 
----

[.text-left]
==== SSH ryšio tarp serverių nr. 1 ir nr. 2 užtikrinimas

Patikrinu kai kuriuos serverio nr. 1 IP nustatymus:

----
stud@cc-lab:~$ ip r
default via 10.128.67.254 dev ens160 proto dhcp src 10.128.67.8 metric 100
10.128.67.0/24 dev ens160 proto kernel scope link src 10.128.67.8
10.128.67.254 dev ens160 proto dhcp scope link src 10.128.67.8 metric 100
172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown

stud@cc-lab:~$ ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:50:56:9a:28:de brd ff:ff:ff:ff:ff:ff
    inet 10.128.67.8/24 brd 10.128.67.255 scope global ens160
       valid_lft forever preferred_lft forever
    inet6 fe80::250:56ff:fe9a:28de/64 scope link
       valid_lft forever preferred_lft forever
3: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN group default
    link/ether 02:42:5b:81:0f:4a brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
       valid_lft forever preferred_lft forever
stud@cc-lab:~$ 
----

=> Lyginant su LD aprašu, vidiniai IP adresai šiek tiek persislinko.

Ieškau „kaimynų“ su sniferiu:

----
stud@cc-lab:~$ sudo tcpdump -tni ens160 not tcp port
tcpdump: can't parse filter expression: syntax error
stud@cc-lab:~$ sudo tcpdump -tni ens160 not tcp port 22
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on ens160, link-type EN10MB (Ethernet), capture size 262144 bytes

ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
LLDP, length 338: sw-rlab-301-top
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.13 tell 10.128.67.5, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.13 tell 10.128.67.5, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.13 tell 10.128.67.5, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.13 tell 10.128.67.5, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.13 tell 10.128.67.5, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.13 tell 10.128.67.5, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.12 tell 10.128.67.5, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
LLDP, length 338: sw-rlab-301-top
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
ARP, Request who-has 10.128.67.14 tell 10.128.67.6, length 46
^C
52 packets captured
52 packets received by filter
0 packets dropped by kernel
stud@cc-lab:~$ 
----

=> „Kaimynai“ tyli.

Diegiu tinklo skenerį:

----
stud@cc-lab:~$ sudo apt install nmap
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following additional packages will be installed:
  libblas3 liblinear4 liblua5.3-0 lua-lpeg nmap-common
Suggested packages:
  liblinear-tools liblinear-dev ncat ndiff zenmap
The following NEW packages will be installed:
  libblas3 liblinear4 liblua5.3-0 lua-lpeg nmap nmap-common
0 upgraded, 6 newly installed, 0 to remove and 43 not upgraded.
Need to get 5,669 kB of archives.
After this operation, 26.8 MB of additional disk space will be used.
Do you want to continue? [Y/n]
Get:1 http://lt.archive.ubuntu.com/ubuntu focal/main amd64 libblas3 amd64 3.9.0-1build1 [142 kB]
Get:2 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 liblinear4 amd64 2.3.0+dfsg-3build1 [41.7 kB]
Get:3 http://lt.archive.ubuntu.com/ubuntu focal/main amd64 liblua5.3-0 amd64 5.3.3-1.1ubuntu2 [116 kB]
Get:4 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 lua-lpeg amd64 1.0.2-1 [31.4 kB]
Get:5 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 nmap-common all 7.80+dfsg1-2build1 [3,676 kB]
Get:6 http://lt.archive.ubuntu.com/ubuntu focal/universe amd64 nmap amd64 7.80+dfsg1-2build1 [1,662 kB]
Fetched 5,669 kB in 3s (1,860 kB/s)
Selecting previously unselected package libblas3:amd64.
(Reading database ... 117331 files and directories currently installed.)
Preparing to unpack .../0-libblas3_3.9.0-1build1_amd64.deb ...
Unpacking libblas3:amd64 (3.9.0-1build1) ...
Selecting previously unselected package liblinear4:amd64.
Preparing to unpack .../1-liblinear4_2.3.0+dfsg-3build1_amd64.deb ...
Unpacking liblinear4:amd64 (2.3.0+dfsg-3build1) ...
Selecting previously unselected package liblua5.3-0:amd64.
Preparing to unpack .../2-liblua5.3-0_5.3.3-1.1ubuntu2_amd64.deb ...
Unpacking liblua5.3-0:amd64 (5.3.3-1.1ubuntu2) ...
Selecting previously unselected package lua-lpeg:amd64.
Preparing to unpack .../3-lua-lpeg_1.0.2-1_amd64.deb ...
Unpacking lua-lpeg:amd64 (1.0.2-1) ...
Selecting previously unselected package nmap-common.
Preparing to unpack .../4-nmap-common_7.80+dfsg1-2build1_all.deb ...
Unpacking nmap-common (7.80+dfsg1-2build1) ...
Selecting previously unselected package nmap.
Preparing to unpack .../5-nmap_7.80+dfsg1-2build1_amd64.deb ...
Unpacking nmap (7.80+dfsg1-2build1) ...
Setting up lua-lpeg:amd64 (1.0.2-1) ...
Setting up libblas3:amd64 (3.9.0-1build1) ...
update-alternatives: using /usr/lib/x86_64-linux-gnu/blas/libblas.so.3 to provide /usr/lib/x86_64-linux-gnu/libblas.so.3 (libblas.so.3-x86_64-linux-gnu) in auto mode
Setting up nmap-common (7.80+dfsg1-2build1) ...
Setting up liblua5.3-0:amd64 (5.3.3-1.1ubuntu2) ...
Setting up liblinear4:amd64 (2.3.0+dfsg-3build1) ...
Setting up nmap (7.80+dfsg1-2build1) ...

Progress: [ 88%] [####################################################################################################################################...................]

Processing triggers for man-db (2.9.1-1) ...
Processing triggers for libc-bin (2.31-0ubuntu9.2) ...
stud@cc-lab:~$ 
----

Ir ieškau jų skenuodamas duotą vidinį potinklį:

----
stud@cc-lab:~$ ip a | awk '/inet/'
    inet 127.0.0.1/8 scope host lo
    inet 10.128.67.8/24 brd 10.128.67.255 scope global ens160
    inet6 fe80::250:56ff:fe9a:28de/64 scope link
    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0

stud@cc-lab:~$ sudo nmap -sP 10.128.67.8/24
Starting Nmap 7.80 ( https://nmap.org ) at 2021-12-07 16:44 UTC
Nmap scan report for 10.128.67.3
Host is up (0.00025s latency).
MAC Address: 00:50:56:9A:2F:79 (VMware)
Nmap scan report for 10.128.67.4
Host is up (0.00017s latency).
MAC Address: 00:50:56:9A:D3:7C (VMware)
Nmap scan report for 10.128.67.5
Host is up (0.00016s latency).
MAC Address: 00:50:56:9A:FD:C6 (VMware)
Nmap scan report for 10.128.67.6
Host is up (0.00016s latency).
MAC Address: 00:50:56:9A:04:4E (VMware)
Nmap scan report for 10.128.67.9
Host is up (0.00023s latency).
MAC Address: 00:50:56:9A:B7:C7 (VMware)
Nmap scan report for 10.128.67.10
Host is up (0.00017s latency).
MAC Address: 00:50:56:9A:2A:F0 (VMware)
Nmap scan report for 10.128.67.11
Host is up (0.00016s latency).
MAC Address: 00:50:56:9A:BD:36 (VMware)
Nmap scan report for 10.128.67.12
Host is up (0.00011s latency).
MAC Address: 00:50:56:9A:5A:91 (VMware)
Nmap scan report for cc-lab (10.128.67.8)
Host is up.
Nmap done: 256 IP addresses (9 hosts up) scanned in 1.82 seconds
stud@cc-lab:~$ 
----

=> Kol neaišku, kas kam priklauso, nutariu treniruotis su savo serveriu `10.128.67.8` kaip taikiniu.

Tikrinu `/etc/hosts` failo formatą ir turinį:

----
stud@cc-lab:~$ tail /etc/hosts
127.0.0.1 localhost
127.0.1.1 cc-lab

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
stud@cc-lab:~$ 
----

Aprašau savo serverį, tik vardu `serveris2`:

----
stud@cc-lab:~$ echo '10.128.67.8    serveris2' >> /etc/hosts
-bash: /etc/hosts: Permission denied

stud@cc-lab:~$ echo '10.128.67.8    serveris2' | sudo tee -a /etc/hosts
10.128.67.8    serveris2

stud@cc-lab:~$ tail /etc/hosts
127.0.0.1 localhost
127.0.1.1 cc-lab

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
10.128.67.8    serveris2
stud@cc-lab:~$ 
----

Patikrinu vardo išsprendimą:

----
stud@cc-lab:~$ ping serveris2
PING serveris2 (10.128.67.8) 56(84) bytes of data.
64 bytes from serveris2 (10.128.67.8): icmp_seq=1 ttl=64 time=0.084 ms
64 bytes from serveris2 (10.128.67.8): icmp_seq=2 ttl=64 time=0.053 ms
^C
--- serveris2 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1016ms
rtt min/avg/max/mdev = 0.053/0.068/0.084/0.015 ms
stud@cc-lab:~$ 
----

=> Laikinas vardas veikia.


[.text-left]
==== Serverio nr. 2 pasiekimas naudojantis SSH raktu

Darbo SSH raktais prisiminimui pasinaudoju straipsneliu: https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-20-04[How to Set Up SSH Keys]

Sukuriu `stud` paskyrai naują SSH raktą:

----
stud@cc-lab:~$ ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key (/home/stud/.ssh/id_rsa):
Created directory '/home/stud/.ssh'.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/stud/.ssh/id_rsa
Your public key has been saved in /home/stud/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:eRmPaDqOuSZ8j+MXGe9DMROb9ewfCVJqK/OIjWWDH4g stud@cc-lab
The key's randomart image is:
+---[RSA 3072]----+
|                 |
|        . . .    |
|         =.=     |
|      . *o+=+    |
|     . *S=++.. . |
|    E =oX.. . o  |
| .    o@ B   . . |
|  o +=+.* .   .  |
|   =*=o  .       |
+----[SHA256]-----+
stud@cc-lab:~$ 
----

=> Kadangi pradžiai išmėginsiu raktą savo paties serveryje, viešas jo raktas apie jį išsisaugos jame pačiame atskirame SSH mazgų įraše.
=> Tad dėl tvarkos reiktų į save jungtis vardu (ne IP adresu).
=> O tam, kad įrašo SSH mazgų vėliau nereiktų pildyti/taisyti, reiktų naudoti jau galutinį vardą, nebe testinį `serveris2`.
