### Darbo Tikslas

* [ ] Išbandyti Ubuntu Linux elementariąsias tinklo paslaugas.  +
* [ ] Paruošti tarnybinę stotį tolesniems tinklo saugumo tyrimams.

### Trumpas atlikto darbo aprašymas ir atsakymai į klausimus

#### 0. Infrastruktūros paruošimas

##### 1. Ruošimo eiga

Laboratorinei infrastruktūrai paruošti pasirinkau VirtualBox virtualizavimo įrankį (hipervizorių).
Host kompiuteris bus senokas `HP EliteBook 8460p` laptopas:

* CPU: i5-2520M @ 2.50GHz
* RAM: 3692 MiB (prieinami OS)

Host OS bus `CentOS 7.9.2009`.
Pradinę VM konfigūraciją sukuriu savo https://github.com/VGTU-ELF/TETfm-20/blob/main/Semestras-2/1-Informacijos-ir-sistem%C5%B3-apsauga/laboratoriniai-darbai/Saulius-Krasuckas/0LD-infra.sh#L78[_Bash_ skripto] pagalba.

Jis parsisiunčia oficialių `.vdi` failą iš https://sourceforge.net/projects/osboxes/files, sukuria naują VM ir prijungia nurodytą diską.

Tuomet per Bootloader menu įrašau Linux branduolio argumentų eilutėje, kad jis atidarytų konsolę per `ttyS0`, virtualų _Serial/UART_ įrenginį:
```
        linux        <...> console=ttyS0,115200n8
```

Ir galiausiai jungiuosi į _Guest_ konsolę iš _Host_ kompiuterio per `telnet`:
```
telnet 127.0.0.1 23001
```

##### 2. NIC konfigūravimas Host pusėje (NAT + Hostonly)

Panašu, kad su įprasta Virtualbox konfigūracija iš _Host OS_ aš _Guest OS_ nepasieksiu paprastai ir saugiai.  +
Pagal nutylėjimą čia VM sukuriamas `NAT` tipo virtualus tinklo interfeisas:  +
`NIC 1:  ... Attachment: NAT ...`

https://www.virtualbox.org/manual/ch06.html#networkingmodes[VirtualBox dokumentacija]:

> image::https://user-images.githubusercontent.com/74717106/123702651-11b3dd80-d86c-11eb-8254-c297b90459c3.png[]

Todėl VM konfigūracijoje https://github.com/VGTU-ELF/TETfm-20/blob/main/Semestras-2/1-Informacijos-ir-sistem%C5%B3-apsauga/laboratoriniai-darbai/Saulius-Krasuckas/0LD-infra.sh#L78[pridedu papildomą tinklo interfeisą], bet jau `Host-only` tipo:
```
VBoxManage hostonlyif create
VBoxManage list hostonlyifs | awk '/^Name/ {NEWEST_NIC=$2} END {print NEWEST_NIC}' | read HOSTONLY_IF
VBoxManage hostonlyif ipconfig ${HOSTONLY_IF} --ip 192.168.10.8
VBoxManage modifyvm ${VM1} --nic2 hostonly --hostonlyadapter2 ${HOSTONLY_IF}
```
Po šito VM gauna du interfeisus:
```
$ VBoxManage showvminfo VGTU-2021-IiSA-saukrs-LDVM1 | grep NIC.[12]
NIC 1:                       MAC: 080027EB204C, Attachment: NAT, Cable connected: on, Trace: off (file: none), Type: 82540EM, Reported speed: 0 Mbps, Boot priority: 0, Promisc Policy: deny, Bandwidth group: none
NIC 1 Settings:  MTU: 0, Socket (send: 64, receive: 64), TCP Window (send:64, receive: 64)
NIC 2:                       MAC: 080027B6C487, Attachment: Host-only Interface 'vboxnet0', Cable connected: on, Trace: off (file: none), Type: 82540EM, Reported speed: 0 Mbps, Boot priority: 0, Promisc Policy: deny, Bandwidth group: none
```

#### 1. Tinklo sąsajos

```
osboxes@osboxes:~$ ifconfig -a

Command 'ifconfig' not found, but can be installed with:

sudo apt install net-tools

osboxes@osboxes:~$ sudo apt install net-tools
[sudo] password for osboxes:
  ...
The following NEW packages will be installed:
  net-tools
  0 upgraded, 1 newly installed, 0 to remove and 58 not upgraded.
  ...
Progress: [ 80%] [##############################################............]

osboxes@osboxes:~$ ifconfig -a
enp0s3: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255
        inet6 fe80::3790:7de6:b710:c982  prefixlen 64  scopeid 0x20<link>
        ether 08:00:27:c7:5c:f1  txqueuelen 1000  (Ethernet)
        RX packets 263  bytes 241467 (241.4 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 271  bytes 28415 (28.4 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

enp0s8: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet6 fe80::1c17:744f:d35c:bdf6  prefixlen 64  scopeid 0x20<link>
        ether 08:00:27:b2:e7:9d  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 71  bytes 10912 (10.9 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 240  bytes 19632 (19.6 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 240  bytes 19632 (19.6 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
```


### Duotosios Linux komandos aprašymas: `TODO`

##### Pavyzdys

### Viso darbo išvados

