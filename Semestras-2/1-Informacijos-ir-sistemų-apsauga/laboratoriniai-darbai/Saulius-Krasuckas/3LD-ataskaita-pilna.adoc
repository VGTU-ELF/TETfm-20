### Darbo Tikslas

* [ ] Patikrinti tinklo nustatymus.  +
* [ ] Susipažinti su `iptable` sintakse. +
* [ ] Nustatyti paprastą tarpsegmentinį ekraną.

### Trumpas atlikto darbo aprašymas

#### 1. Virtualaus kompiuterio konfigūracija

Tikrinu IP adresus:

```
enp0s3: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255
        inet6 fe80::440e:4f39:f7ec:bb91  prefixlen 64  scopeid 0x20<link>
        ether 08:00:27:7e:da:b1  txqueuelen 1000  (Ethernet)
        RX packets 32094  bytes 40220614 (40.2 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 15495  bytes 1016242 (1.0 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

enp0s8: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.14  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::a00:27ff:fe40:2cf6  prefixlen 64  scopeid 0x20<link>
        ether 08:00:27:40:2c:f6  txqueuelen 1000  (Ethernet)
        RX packets 51491  bytes 3770623 (3.7 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 78571  bytes 33188421 (33.1 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 816  bytes 70179 (70.1 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 816  bytes 70179 (70.1 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

```

Tikrinu maršrutizacijos lentelę:

```
osboxes@ldvm1:~$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         192.168.10.254  0.0.0.0         UG    0      0        0 enp0s8
default         10.0.2.2        0.0.0.0         UG    100    0        0 enp0s3
10.0.2.0        0.0.0.0         255.255.255.0   U     100    0        0 enp0s3
link-local      0.0.0.0         255.255.0.0     U     1000   0        0 enp0s8
192.168.10.0    0.0.0.0         255.255.255.0   U     0      0        0 enp0s8
```

* Nustatymai nevsai atitinka LD aprašą:

** 1. Vietoj `eth*` tinklo sąsajų vardų Linux naudoja `enp0s*` vardus.  +
   (šiame darbe naudojamas branduolys `5.8.0-59-generic`)  +
   Palieku kaip yra.

** 2. Trūksta `10.10.10.x` adreso (nes LD2 buvo uždėtas rankomis, o po to OS perkrauta).

** 3. OS turi du vartus pagal nutylėjimą:

*** vienas pasiekiamas per `enp0s3`, _NAT_ tipo tinklo sąsają (su automatiniu IP adresu);
*** kitas pasiekiamas per `enp0s8`, _Host-only_ tipo tinklo sąsają.
+
   Atsekiau, kad pirmuosius vartus sukonfigūruoja _NetworkManager_ įrankis,
   sukurdamas dedikuotą tinklo prisijungimą
   (tam atskirą tinklo valdymo abstrakciją):
+
```
osboxes@ldvm1:~$ nmcli connection show
NAME                UUID                                  TYPE      DEVICE
Wired connection 1  2c671148-b52a-4426-9325-d35a52967e3c  ethernet  enp0s3

osboxes@ldvm1:~$ nmcli connection show id "Wired connection 1" | grep 10.0.2.2
IP4.GATEWAY:                            10.0.2.2
IP4.ROUTE[1]:                           dst = 0.0.0.0/0, nh = 10.0.2.2, mt = 100
DHCP4.OPTION[23]:                       routers = 10.0.2.2
```

Pataisau `interfaces` failą ir palyginu su ankstesne versija:

```
osboxes@ldvm1:~$ sudo cp -av /etc/network/interfaces /etc/network/interfaces.BACKUP
'/etc/network/interfaces' -> '/etc/network/interfaces.BACKUP'

osboxes@ldvm1:~$ sudo vim.tiny /etc/network/interfaces

osboxes@ldvm1:~$ diff -u /etc/network/interfaces.BACKUP /etc/network/interfaces
--- /etc/network/interfaces.BACKUP  2021-07-02 15:19:26.453975316 -0400
+++ /etc/network/interfaces 2021-07-02 15:19:30.491993480 -0400
@@ -1,6 +1,11 @@
 auto enp0s8
+auto enp0s8:2
 
 iface enp0s8 inet static
 address 192.168.10.14
 netmask 255.255.255.0
 gateway 192.168.10.254
+
+iface enp0s8:2 inet static
+address 10.10.10.4
```

Aktyvuoju pakeistus nustatymus:

```
osboxes@ldvm1:~$ sudo ifup enp0s8:2

osboxes@ldvm1:~$ ifconfig -a
enp0s3: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        ether 08:00:27:7e:da:b1  txqueuelen 1000  (Ethernet)
        RX packets 32114  bytes 40222382 (40.2 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 15527  bytes 1018963 (1.0 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

enp0s8: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.10.14  netmask 255.255.255.0  broadcast 192.168.10.255
        inet6 fe80::a00:27ff:fe40:2cf6  prefixlen 64  scopeid 0x20<link>
        ether 08:00:27:40:2c:f6  txqueuelen 1000  (Ethernet)
        RX packets 53197  bytes 3911386 (3.9 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 79746  bytes 33383444 (33.3 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

enp0s8:2: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.10.10.4  netmask 255.255.255.0  broadcast 10.10.10.255
        ether 08:00:27:40:2c:f6  txqueuelen 1000  (Ethernet)

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 817  bytes 70252 (70.2 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 817  bytes 70252 (70.2 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

```
Abu IP adresai, prašomi LD3, nurodyti.

* Nereikalingus vartus pagal nutylėjimą bandau išmest būtent per _NetworkManager_
  kartu su minimu abstrakčiu tinklo prisijungimu:
+
```
osboxes@ldvm1:~$ sudo nmcli connection delete "Wired connection 1"
Connection 'Wired connection 1' (2c671148-b52a-4426-9325-d35a52967e3c) successfully deleted.
```

** Tikrinu maršrutizacijos lentelę:
+
```
osboxes@ldvm1:~$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         192.168.10.254  0.0.0.0         UG    0      0        0 enp0s8
10.10.10.0      0.0.0.0         255.255.255.0   U     0      0        0 enp0s8
link-local      0.0.0.0         255.255.0.0     U     1000   0        0 enp0s8
192.168.10.0    0.0.0.0         255.255.255.0   U     0      0        0 enp0s8
```
Vieninteliai vartai pagal nutylėjimą yra `192.168.10.254`, kaip ir prašo LD3 aprašas.  +
Patikrinimo žingsnis atliktas.

#### 2. Tinklo paslaugų tikrinimas

Diegiu grafinę priemonę `sysvconfig`:

```
osboxes@ldvm1:~$ sudo apt-get install sysvconfig
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package sysvconfig
```


* Programinės įrangos valdymo įrankis neranda minimos priemonės.

** Mėginu atnaujinti programų sąrašus:
+
```
osboxes@ldvm1:~$ sudo apt-get update
0% [Working]
Err:1 http://security.ubuntu.com/ubuntu focal-security InRelease            
  Temporary failure resolving 'security.ubuntu.com'
Err:2 http://us.archive.ubuntu.com/ubuntu focal InRelease                   
  Temporary failure resolving 'us.archive.ubuntu.com'
Err:3 http://us.archive.ubuntu.com/ubuntu focal-updates InRelease
  Temporary failure resolving 'us.archive.ubuntu.com'
Err:4 http://us.archive.ubuntu.com/ubuntu focal-backports InRelease
  Temporary failure resolving 'us.archive.ubuntu.com'
Reading package lists... Done           
W: Failed to fetch http://us.archive.ubuntu.com/ubuntu/dists/focal/InRelease  Temporary failure resolving 'us.archive.ubuntu.com'
W: Failed to fetch http://us.archive.ubuntu.com/ubuntu/dists/focal-updates/InRelease  Temporary failure resolving 'us.archive.ubuntu.com'
W: Failed to fetch http://us.archive.ubuntu.com/ubuntu/dists/focal-backports/InRelease  Temporary failure resolving 'us.archive.ubuntu.com'
W: Failed to fetch http://security.ubuntu.com/ubuntu/dists/focal-security/InRelease  Temporary failure resolving 'security.ubuntu.com'
W: Some index files failed to download. They have been ignored, or old ones used instead.
```

** Paaiškėja, kad pašalinus vartus pagal nutylėjimą `10.0.2.2`, nustojo veikti interneto ryšys.  +
   Jis veikdavo per tinklo sąsają `enp0s3`, kuri VirtualBox sistemoje yra _NAT_ tipo (skirta išėjimui į internetą).  +

** Kadangi dabar ėmė veikti tik vartai per `192.168.10.254` (priklausantys Host OS),
   teko konfigūruoti maršrutizavimą + įjungti _NAT_ mechanizmą jau Host OS pusėje būtent šiai Guest tinklo sąsajai (o ne įprastinei).  +
   (Neaprašau Host OS veiksmų, tai nebūtinai Linux sistema)

** Sąrašų atnaujinimas vėl veikia:
+
```
osboxes@ldvm1:~$ sudo apt-get update
Hit:1 http://us.archive.ubuntu.com/ubuntu focal InRelease
Get:2 http://security.ubuntu.com/ubuntu focal-security InRelease [114 kB]
Get:3 http://us.archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]
  ...
Get:21 http://us.archive.ubuntu.com/ubuntu focal-backports/universe Translation-en [2,060 B]
Get:22 http://us.archive.ubuntu.com/ubuntu focal-backports/universe amd64 DEP-11 Metadata [1,780 B]
Get:23 http://us.archive.ubuntu.com/ubuntu focal-backports/universe amd64 c-n-f Metadata [288 B]
Fetched 4,078 kB in 10s (391 kB/s)
Reading package lists... Done
```

** Turbūt vertėtų įtraukti tokį patikslinimą į laboratorinio darbo aprašą.  +
   (apie reikiamą _VirtualBox_ tinklo sąsajos tipą + maršrutizavimą tarp Host ir Guest OS)

** Tęsiu `sysvconfig` diegimą.
   Tokio paketo _Ubuntu 20.04.2_ neturi:
+
```
osboxes@ldvm1:~$ sudo apt-get install sysvconfig
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package sysvconfig

osboxes@ldvm1:~$ apt search sysvconfig
Sorting... Done
Full Text Search... Done
```

** Panašu, kad šis įrankis iš Ubuntu pašalintas 2009-09-11:  +
   https://superuser.com/questions/96040/did-sysvconfig-disappear-in-ubuntu-9-10

** Taip pat dabar neveikia ir `sysvconfig` atitikmenys, dar veikę po jo pašalinimo:   +
   `sysv-rc-conf`, `rcconf`:  +
   https://askubuntu.com/questions/1043248/rcconf-package-alternative-in-bionic-beaver

** Panašu, kad jie nebeveikia nuo 2015 m., kai OS atsirado `systemd` mechanizmas.  +
   Ir tai kėlė nepatogumų žmonėms, atnaujinantiems Ubuntu jau net nuo versijos `14.04`:  +
   https://askubuntu.com/questions/1106216/ubuntu-18-04-cant-install-sysv-rc-conf-package-for-managing-startup-services#comment1824791_1106217

** Galbūt reikėtų pagal tai irgi patikslinti LD3 aprašą?


* Ieškau atitikmenų darbui su SystemD mechanizmu.  +
   +
  Jeigu pakanka tik patikrinti tarnybų būsenas, tiks komanda `systemctl`:
+
```
osboxes@ldvm1:~$ systemctl list-unit-files --type=service --all

----8><----------------------------------------------------------------------------------------------------><8----
UNIT FILE                                  STATE           VENDOR PRESET
accounts-daemon.service                    enabled         enabled      
acpid.service                              disabled        enabled      
alsa-restore.service                       static          enabled      
alsa-state.service                         static          enabled      
alsa-utils.service                         masked          enabled      
anacron.service                            enabled         enabled      
apache-htcacheclean.service                disabled        enabled      
apache-htcacheclean@.service               disabled        enabled      
apache2.service                            enabled         enabled      
apache2@.service                           disabled        enabled      
apparmor.service                           enabled         enabled      
apport-autoreport.service                  static          enabled      
apport-forward@.service                    static          enabled      
apport.service                             generated       enabled      
apt-daily-upgrade.service                  static          enabled      
apt-daily.service                          static          enabled      
autovt@.service                            enabled         enabled      
avahi-daemon.service                       enabled         enabled      
lines 1-19
----8><----------------------------------------------------------------------------------------------------><8----
```
+
Šitaip lengva filtruoti tarnybas pagal vardus (jų šablonus):
+
```
osboxes@ldvm1:~$ systemctl list-unit-files --type=service --all *Manager*
UNIT FILE                                  STATE   VENDOR PRESET
dbus-org.freedesktop.ModemManager1.service enabled enabled      
ModemManager.service                       enabled enabled      
NetworkManager-dispatcher.service          enabled enabled      
NetworkManager-wait-online.service         enabled enabled      
NetworkManager.service                     enabled enabled      

5 unit files listed.
```

* Tarnybų valdymui susirandu įrankį `serman2`: https://aur.archlinux.org/packages/serman

** Pasiimu jį iš GitHub:
+
```
osboxes@ldvm1:~$ mkdir src

osboxes@ldvm1:~$ cd src/

osboxes@ldvm1:~$ git clone https://github.com/baoboa/serman
Cloning into 'serman'...
remote: Enumerating objects: 41, done.
remote: Total 41 (delta 0), reused 0 (delta 0), pack-reused 41
Unpacking objects: 100% (41/41), 32.70 KiB | 985.00 KiB/s, done.
```

** Išsibandau įrankį:
+
```
osboxes@ldvm1:~/src$ sudo serman/serman.py

----8><----------------------------------------------------------------------------------------------------><8----
Commands│  Services
────────┼─────────────────────────────────────────────────────────────────────────────────────────────────────────
enable  │  getty@tty2.service                                                                          running ● ▲
restart │  getty@tty6.service                                                                          running ● ▲
start   │  gpu-manager.service                                                                            dead
status  │  graphical.target                                                                               dead
        │  grub-common.service                                                                          exited ●
        │  grub-initrd-fallback.service                                                                   dead
        │  halt.target
        │  hibernate.target
        │  home.mount                                                                                  mounted ●
        │  hwclock.service
        │  hybrid-sleep.target
        │  ifup@.service
        │  ifup@enp0s8.service                                                                          exited ● ▲
        │  ifupdown-pre.service                                                                         exited ●
        │  ifupdown-wait-online.service
────────┴─────────────────────────────────────────────────────────────────────────────────────────────────────────
query service status (display output with F2)                                                  [press F3 for help]
```

** Deja, įrankis `serman2` turi trūkumų:

*** Ne visada teisingai nuskaito tarnybų `Enabled` būseną.

*** Taip pat šios būsenos perjungimui (ir kitiems veiksmams) naudoja ne visai intuityvų UI:

**** pagalba kviečiama klavišu `F3`;
**** veiksmo tipas pasirenkamas kairiame stulpelyje, tarnybos – sąraše dešinėje;
**** tarp jų persijungiama klavišais `Right`, `Left`;
**** tarnybas veiksmui įvykdyti reikia pasirinkti klavišu `Space`;
**** veiksmas įvykdomas klavišu `Enter`;
**** rezultatas pasižiūrimas klavišus `F3` atskirame vaizde;
**** grįžtama į pradinį vaizdą paspaudus `Enter`;
**** programa uždaroma paspaudus `Ctrl-C`;
**** užuominos (angl. _Hint_) eilutė pradingsta po pirmojo vaizdo perjungimo ir grįžimo.

*** Taip pat įrankis rodo ne tik tarnybų (`.service`), bet ir kitų SystemD vienetų būsenas:

**** `.automount`
**** `.device`
**** `.mount`
**** `.path`
**** `.scope`
**** `.slice`
**** `.socket`
**** `.swap`
**** `.target`
**** `.timer`

* Susirandu kitą įrankį, `chkservice`

** Diegiu:
+
```
osboxes@ldvm1:~$ apt-cache search chkservice
chkservice - Tool for managing systemd units
osboxes@ldvm1:~$ 
osboxes@ldvm1:~$ sudo apt-get install chkservice
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following NEW packages will be installed:
  chkservice
0 upgraded, 1 newly installed, 0 to remove and 159 not upgraded.
Need to get 41.3 kB of archives.
After this operation, 188 kB of additional disk space will be used.
Get:1 http://us.archive.ubuntu.com/ubuntu focal/universe amd64 chkservice amd64 0.3-1build1 [41.3 kB]
Fetched 41.3 kB in 1s (58.7 kB/s)
Selecting previously unselected package chkservice.
(Reading database ... 192778 files and directories currently installed.)
Preparing to unpack .../chkservice_0.3-1build1_amd64.deb ...
Unpacking chkservice (0.3-1build1) ...
Setting up chkservice (0.3-1build1) ...
Processing triggers for man-db (2.9.1-1) ...
```

** Išbandau `chkservice`:
+
```
osboxes@ldvm1:~/src$ sudo chkservice

----8><----------------------------------------------------------------------------------------------------><8----
 Failed: Connection reset by peer                                                                                 
                                                                                                                  
  -m-     kbd.service                                     kbd.service                                             
  [x]  >  kerneloops.service                              Tool to automatically collect and submit kernel crash   
  [x]  =  keyboard-setup.service                          Set the console keyboard layout                         
  [s]  =  kmod-static-nodes.service                       Create list of static device nodes for the current ker  
  [s]     kmod.service                                    /lib/systemd/system/kmod.service                        
  [s]  =  logrotate.service                               Rotate log files                                        
> [x]  =  ModemManager.service                            Modem Manager                                          <
  [s]  =  man-db.service                                  Daily man-db regeneration                               
  [s]     modprobe@.service                               /lib/systemd/system/modprobe@.service                   
  [s]  =  modprobe@drm.service                            Load Kernel Module drm                                  
  [s]  =  motd-news.service                               Message of the Day                                      
  [x]  >  mysql.service                                   MySQL Community Server                                  
  [x]     NetworkManager-dispatcher.service               /lib/systemd/system/NetworkManager-dispatcher.service   
  [x]  =  NetworkManager-wait-online.service              Network Manager Wait Online                             
  [x]  >  NetworkManager.service                          Network Manager                                         
  [x]  =  netplan-ovs-cleanup.service                     OpenVSwitch configuration for cleanup                   
                                                                                                                  
                                                         92/533                                                   
----8><----------------------------------------------------------------------------------------------------><8----
```

** Norint uždrausti tarnybą ir paspaudus `Space`, gaunu klaidą `Failed: Connection reset by peer`.  +
   Taip yra dėl klaidos programoje: https://github.com/linuxenko/chkservice/issues/12

** Imu pataisytą programos kodą iš GitHub: https://github.com/nufeng1999/chkservice
+
```
osboxes@ldvm1:~$ cd src

osboxes@ldvm1:~/src$ git clone https://github.com/nufeng74/chkservice.git
Cloning into 'chkservice'...
remote: Enumerating objects: 424, done.
remote: Counting objects: 100% (7/7), done.
remote: Compressing objects: 100% (6/6), done.
remote: Total 424 (delta 1), reused 4 (delta 1), pack-reused 417
Receiving objects: 100% (424/424), 98.22 KiB | 1.51 MiB/s, done.
Resolving deltas: 100% (264/264), done.

osboxes@ldvm1:~/src$ cd chkservice
osboxes@ldvm1:~/src/chkservice$ mkdir build
osboxes@ldvm1:~/src/chkservice$ cd build

osboxes@ldvm1:~/src/chkservice/build$ cmake -DCMAKE_INSTALL_PREFIX=/usr ..

Command 'cmake' not found, but can be installed with:

sudo snap install cmake  # version 3.20.5, or
sudo apt  install cmake  # version 3.16.3-1ubuntu1

See 'snap info cmake' for additional versions.
```

** Diegiu kūrimo priemones:
+
```
osboxes@ldvm1:~/src/chkservice/build$ sudo apt-get install cmake g++ libsystemd-dev libncurses-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Suggested packages:
  cmake-doc ninja-build g++-multilib ncurses-doc
The following NEW packages will be installed:
  cmake g++ libncurses-dev libsystemd-dev
0 upgraded, 4 newly installed, 0 to remove and 153 not upgraded.
Need to get 0 B/4,256 kB of archives.
After this operation, 22.6 MB of additional disk space will be used.
Selecting previously unselected package cmake.
(Reading database ... 196958 files and directories currently installed.)
Preparing to unpack .../cmake_3.16.3-1ubuntu1_amd64.deb ...
Unpacking cmake (3.16.3-1ubuntu1) ...
Selecting previously unselected package g++.
Preparing to unpack .../g++_4%3a9.3.0-1ubuntu2_amd64.deb ...
Unpacking g++ (4:9.3.0-1ubuntu2) ...
Selecting previously unselected package libncurses-dev:amd64.
Preparing to unpack .../libncurses-dev_6.2-0ubuntu2_amd64.deb ...
Unpacking libncurses-dev:amd64 (6.2-0ubuntu2) ...
Selecting previously unselected package libsystemd-dev:amd64.
Preparing to unpack .../libsystemd-dev_245.4-4ubuntu3.7_amd64.deb ...
Unpacking libsystemd-dev:amd64 (245.4-4ubuntu3.7) ...
Setting up libncurses-dev:amd64 (6.2-0ubuntu2) ...
Setting up g++ (4:9.3.0-1ubuntu2) ...
update-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode
Setting up cmake (3.16.3-1ubuntu1) ...
Setting up libsystemd-dev:amd64 (245.4-4ubuntu3.7) ...
Processing triggers for man-db (2.9.1-1) ...
```

** Kompiliuoju įrankį:
+
```
osboxes@ldvm1:~/src/chkservice/build$ cmake ..
-- The C compiler identification is GNU 9.3.0
-- The CXX compiler identification is GNU 9.3.0
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- DEBUG mode disabled
-- Local build
-- Found PkgConfig: /usr/bin/pkg-config (found version "0.29.1") 
-- Checking for module 'libsystemd'
--   Found libsystemd, version 245
-- Checking for module 'ncurses'
--   Found ncurses, version 6.2.20200212
-- Configuring done
-- Generating done
-- Build files have been written to: /home/osboxes/src/chkservice/build

osboxes@ldvm1:~/src/chkservice/build$ make chkservice
Scanning dependencies of target CHKSYSTEMD
[ 10%] Building CXX object src/CMakeFiles/CHKSYSTEMD.dir/chk-systemd.cpp.o
[ 20%] Building CXX object src/CMakeFiles/CHKSYSTEMD.dir/chk-systemd-utils.cpp.o
[ 30%] Linking CXX static library libCHKSYSTEMD.a
[ 30%] Built target CHKSYSTEMD
[ 40%] Building CXX object src/CMakeFiles/CHKCTL.dir/chk-ctl.cpp.o
[ 50%] Linking CXX static library libCHKCTL.a
[ 50%] Built target CHKCTL
[ 60%] Building CXX object src/CMakeFiles/CHKUI.dir/chk-wmain.cpp.o
  ...
[ 70%] Building CXX object src/CMakeFiles/CHKUI.dir/chk-wutils.cpp.o
[ 80%] Linking CXX static library libCHKUI.a
[ 80%] Built target CHKUI
[ 90%] Building CXX object src/CMakeFiles/chkservice.dir/chkservice.cpp.o
[100%] Linking CXX executable chkservice
[100%] Built target chkservice
```

** Išbandau pataisymą:
+
```
osboxes@ldvm1:~/src/chkservice/build$ ll src/chkservice
-rwxrwxr-x 1 osboxes osboxes 94344 Jul  4 15:27 src/chkservice*

osboxes@ldvm1:~/src/chkservice/build$ sudo src/chkservice
----8><----------------------------------------------------------------------------------------------------><8----
                                                                                                                  
                                                                                                                  
  [x]  >  irqbalance.service                              irqbalance daemon                                       
  -m-     kbd.service                                     kbd.service                                             
  [x]  >  kerneloops.service                              Tool to automatically collect and submit kernel crash   
  [x]  =  keyboard-setup.service                          Set the console keyboard layout                         
  [s]  =  kmod-static-nodes.service                       Create list of static device nodes for the current ker  
  [s]     kmod.service                                    /lib/systemd/system/kmod.service                        
  [s]  =  logrotate.service                               Rotate log files                                        
> [ ]     ModemManager.service                            /lib/systemd/system/ModemManager.service               <
  [s]  =  man-db.service                                  Daily man-db regeneration                               
  [s]     modprobe@.service                               /lib/systemd/system/modprobe@.service                   
  [s]  =  modprobe@drm.service                            Load Kernel Module drm                                  
  [s]  =  motd-news.service                               Message of the Day                                      
  [x]  >  mysql.service                                   MySQL Community Server                                  
  [x]     NetworkManager-dispatcher.service               /lib/systemd/system/NetworkManager-dispatcher.service   
  [x]  =  NetworkManager-wait-online.service              Network Manager Wait Online                             
  [x]  >  NetworkManager.service                          Network Manager                                         
                                                                                                                  
                                                         91/532                                                   
----8><----------------------------------------------------------------------------------------------------><8----
```
+
Ties `ModemManager` paspaudus `Space`, tarnyba dabar išsijungia jau iškart.

** `chkservice` trūkumai:

*** Nevystomas, autorės apleistas.
*** Nevisai intuityvus GUI:
**** Pagalbos klavišas `?`;
**** Paieška randa tik pirmą rezultatą;
**** Neaprašytas būsenos stulpelis:
***** `=` – sustabdyta tarnyba;
***** `>` – veikianti tarnyba.

* Susirandu dar vieną įrankį, `systemctl-ui`.

** Pasiimu jį iš GitHub:
+
```
osboxes@ldvm1:~/src$ git clone https://github.com/mpbcode/systemctl-ui
Cloning into 'systemctl-ui'...
remote: Enumerating objects: 7, done.
remote: Total 7 (delta 0), reused 0 (delta 0), pack-reused 7
Unpacking objects: 100% (7/7), 14.05 KiB | 1.76 MiB/s, done.
```

** Diegiu Lua interpretatorių:
+
```
osboxes@ldvm1:~/src$ sudo apt-get install lua5.3
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following NEW packages will be installed:
  lua5.3
0 upgraded, 1 newly installed, 0 to remove and 153 not upgraded.
Need to get 0 B/110 kB of archives.
After this operation, 414 kB of additional disk space will be used.
Selecting previously unselected package lua5.3.
(Reading database ... 197606 files and directories currently installed.)
Preparing to unpack .../lua5.3_5.3.3-1.1ubuntu2_amd64.deb ...
Unpacking lua5.3 (5.3.3-1.1ubuntu2) ...
Setting up lua5.3 (5.3.3-1.1ubuntu2) ...
update-alternatives: using /usr/bin/lua5.3 to provide /usr/bin/lua (lua-interpreter) in auto mode
update-alternatives: using /usr/bin/luac5.3 to provide /usr/bin/luac (lua-compiler) in auto mode
Processing triggers for man-db (2.9.1-1) ...
```

** Tikrinu įrankį:
+
image::https://user-images.githubusercontent.com/74717106/124387489-9462ef80-dce7-11eb-91be-66d6f26e259d.png[]

** Deja, jis rodo tik uždraustas (_Disabled_) tarnybas:  +
   https://github.com/mpbcode/systemctl-ui/issues/1

* Įrankio paieškos apibendrinimas:

** įrankis `chkservice` gana tiksliai atitinka `sysvconfig`;
** puikiai veikia su SystemD _Init_-mechanizmu;
** tik nerodo tarnybų priklausomybių nuo _Runlevels_ (arba nuo _targets_, kalbant SystemD terminais).


SSH serverio instaliavimas

```
osboxes@ldvm1:~$ sudo apt-get install ssh
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following additional packages will be installed:
  ncurses-term openssh-server openssh-sftp-server ssh-import-id
Suggested packages:
  molly-guard monkeysphere ssh-askpass
The following NEW packages will be installed:
  ncurses-term openssh-server openssh-sftp-server ssh ssh-import-id
0 upgraded, 5 newly installed, 0 to remove and 153 not upgraded.
Need to get 429 kB/693 kB of archives.
After this operation, 6,130 kB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 openssh-sftp-server amd64 1:8.2p1-4ubuntu0.2 [51.5 kB]
Get:2 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 openssh-server amd64 1:8.2p1-4ubuntu0.2 [377 kB]
Fetched 429 kB in 1s (300 kB/s)         
Preconfiguring packages ...
Selecting previously unselected package openssh-sftp-server.
(Reading database ... 194772 files and directories currently installed.)
Preparing to unpack .../openssh-sftp-server_1%3a8.2p1-4ubuntu0.2_amd64.deb ...
Unpacking openssh-sftp-server (1:8.2p1-4ubuntu0.2) ...
Selecting previously unselected package openssh-server.
Preparing to unpack .../openssh-server_1%3a8.2p1-4ubuntu0.2_amd64.deb ...
Unpacking openssh-server (1:8.2p1-4ubuntu0.2) ...
Selecting previously unselected package ssh.
Preparing to unpack .../ssh_1%3a8.2p1-4ubuntu0.2_all.deb ...
Unpacking ssh (1:8.2p1-4ubuntu0.2) ...
Selecting previously unselected package ncurses-term.
Preparing to unpack .../ncurses-term_6.2-0ubuntu2_all.deb ...
Unpacking ncurses-term (6.2-0ubuntu2) ...
Selecting previously unselected package ssh-import-id.
Preparing to unpack .../ssh-import-id_5.10-0ubuntu1_all.deb ...
Unpacking ssh-import-id (5.10-0ubuntu1) ...
Setting up openssh-sftp-server (1:8.2p1-4ubuntu0.2) ...
Setting up openssh-server (1:8.2p1-4ubuntu0.2) ...
rescue-ssh.target is a disabled or a static unit, not starting it.
Setting up ssh-import-id (5.10-0ubuntu1) ...
Setting up ncurses-term (6.2-0ubuntu2) ...
Setting up ssh (1:8.2p1-4ubuntu0.2) ...
Processing triggers for systemd (245.4-4ubuntu3.7) ...
Processing triggers for man-db (2.9.1-1) ...
Processing triggers for ufw (0.36-6) ...
```

* Patikrinu, veikia:
+
```
osboxes@ldvm1:~$ systemctl status ssh
● ssh.service - OpenBSD Secure Shell server
     Loaded: loaded (/lib/systemd/system/ssh.service; enabled; vendor preset: enabled)
     Active: active (running) since Sun 2021-07-04 18:04:15 EEST; 12min ago
       Docs: man:sshd(8)
             man:sshd_config(5)
   Main PID: 34166 (sshd)
      Tasks: 1 (limit: 1105)
     Memory: 1.8M
     CGroup: /system.slice/ssh.service
             └─34166 sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups

Jul 04 18:04:15 ldvm1 systemd[1]: Starting OpenBSD Secure Shell server...
Jul 04 18:04:15 ldvm1 sshd[34166]: Server listening on 0.0.0.0 port 22.
Jul 04 18:04:15 ldvm1 sshd[34166]: Server listening on :: port 22.
Jul 04 18:04:15 ldvm1 systemd[1]: Started OpenBSD Secure Shell server.
Jul 04 18:04:46 ldvm1 sshd[34863]: Accepted password for osboxes from 192.168.10.254 port 33654 ssh2
Jul 04 18:04:46 ldvm1 sshd[34863]: pam_unix(sshd:session): session opened for user osboxes by (uid=0)
```
Tą patį pakartojau ir kaimyniniame kompiuteryje.


### 3. Tinklo paslaugų tikrinimas

Teikiamos tinklo paslaugos:
+
```
osboxes@ldvm1:~$ netstat -an
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
tcp        0      0 127.0.0.1:33060         0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN     
tcp6       0      0 :::80                   :::*                    LISTEN     
tcp6       0      0 :::22                   :::*                    LISTEN     
tcp6       0      0 ::1:631                 :::*                    LISTEN     
tcp6       0      0 :::443                  :::*                    LISTEN     
udp        0      0 0.0.0.0:631             0.0.0.0:*                          
udp        0      0 0.0.0.0:40623           0.0.0.0:*                          
udp        0      0 0.0.0.0:5353            0.0.0.0:*                          
udp6       0      0 :::39624                :::*                               
udp6       0      0 :::5353                 :::*                               
Active UNIX domain sockets (servers and established)
Proto RefCnt Flags       Type       State         I-Node   Path
unix  2      [ ACC ]     SEQPACKET  LISTENING     15802    /run/udev/control
unix  2      [ ]         DGRAM                    29218    /run/user/1000/systemd/notify
unix  2      [ ACC ]     STREAM     LISTENING     15777    /run/systemd/private
unix  2      [ ACC ]     STREAM     LISTENING     29221    /run/user/1000/systemd/private
unix  2      [ ACC ]     STREAM     LISTENING     29227    /run/user/1000/bus
unix  2      [ ACC ]     STREAM     LISTENING     15779    /run/systemd/userdb/io.systemd.DynamicUser
unix  2      [ ACC ]     STREAM     LISTENING     15788    /run/systemd/fsck.progress
unix  2      [ ACC ]     STREAM     LISTENING     29228    /run/user/1000/gnupg/S.dirmngr
unix  2      [ ACC ]     STREAM     LISTENING     29229    /run/user/1000/gnupg/S.gpg-agent.browser
unix  2      [ ACC ]     STREAM     LISTENING     29231    /run/user/1000/gnupg/S.gpg-agent.extra
unix  12     [ ]         DGRAM                    15796    /run/systemd/journal/dev-log
unix  2      [ ACC ]     STREAM     LISTENING     29232    /run/user/1000/gnupg/S.gpg-agent.ssh
unix  2      [ ACC ]     STREAM     LISTENING     15798    /run/systemd/journal/stdout
unix  2      [ ACC ]     STREAM     LISTENING     29233    /run/user/1000/gnupg/S.gpg-agent
unix  7      [ ]         DGRAM                    15800    /run/systemd/journal/socket
unix  2      [ ACC ]     STREAM     LISTENING     29234    /run/user/1000/pk-debconf-socket
unix  2      [ ACC ]     STREAM     LISTENING     29235    /run/user/1000/pulse/native
unix  2      [ ACC ]     STREAM     LISTENING     29236    /run/user/1000/snapd-session-agent.socket
unix  2      [ ACC ]     STREAM     LISTENING     14249    /run/systemd/journal/io.systemd.journal
unix  2      [ ACC ]     STREAM     LISTENING     20196    /run/acpid.socket
unix  2      [ ACC ]     STREAM     LISTENING     20198    /run/avahi-daemon/socket
unix  2      [ ACC ]     STREAM     LISTENING     20200    /run/cups/cups.sock
unix  2      [ ACC ]     STREAM     LISTENING     20202    /run/dbus/system_bus_socket
unix  2      [ ACC ]     STREAM     LISTENING     20204    /run/snapd.socket
unix  2      [ ACC ]     STREAM     LISTENING     20206    /run/snapd-snap.socket
unix  2      [ ACC ]     STREAM     LISTENING     20208    /run/uuidd/request
unix  2      [ ACC ]     STREAM     LISTENING     21772    /run/irqbalance//irqbalance690.sock
unix  2      [ ACC ]     STREAM     LISTENING     24907    /var/run/mysqld/mysqlx.sock
unix  2      [ ACC ]     STREAM     LISTENING     24909    /var/run/mysqld/mysqld.sock
unix  4      [ ]         DGRAM                    15774    /run/systemd/notify
unix  3      [ ]         STREAM     CONNECTED     30471    /run/user/1000/bus
unix  2      [ ]         DGRAM                    24880    
unix  3      [ ]         DGRAM                    18641    
unix  3      [ ]         STREAM     CONNECTED     22232    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     30484    /run/systemd/journal/stdout
unix  2      [ ]         DGRAM                    18637    
unix  3      [ ]         STREAM     CONNECTED     23851    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     30483    /run/systemd/journal/stdout
unix  3      [ ]         DGRAM                    15776    
unix  3      [ ]         STREAM     CONNECTED     30494    
unix  3      [ ]         STREAM     CONNECTED     22231    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     20475    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     30482    
unix  3      [ ]         DGRAM                    18642    
unix  2      [ ]         DGRAM                    29196    
unix  3      [ ]         STREAM     CONNECTED     21631    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     30463    /run/user/1000/bus
unix  3      [ ]         STREAM     CONNECTED     20540    
unix  3      [ ]         STREAM     CONNECTED     29438    /run/systemd/journal/stdout
unix  3      [ ]         DGRAM                    18640    
unix  3      [ ]         STREAM     CONNECTED     20719    /run/systemd/journal/stdout
unix  3      [ ]         DGRAM                    15775    
unix  3      [ ]         STREAM     CONNECTED     30464    
unix  2      [ ]         DGRAM                    29209    
unix  3      [ ]         STREAM     CONNECTED     20579    
unix  3      [ ]         STREAM     CONNECTED     30424    
unix  3      [ ]         STREAM     CONNECTED     22913    
unix  3      [ ]         STREAM     CONNECTED     30421    /run/user/1000/bus
unix  3      [ ]         STREAM     CONNECTED     20542    /run/systemd/journal/stdout
unix  2      [ ]         DGRAM                    23016    
unix  3      [ ]         STREAM     CONNECTED     30495    /run/user/1000/bus
unix  3      [ ]         STREAM     CONNECTED     19045    
unix  3      [ ]         DGRAM                    29219    
unix  3      [ ]         STREAM     CONNECTED     20543    
unix  3      [ ]         STREAM     CONNECTED     30470    
unix  3      [ ]         DGRAM                    29220    
unix  3      [ ]         STREAM     CONNECTED     20717    
unix  3      [ ]         STREAM     CONNECTED     30481    
unix  3      [ ]         STREAM     CONNECTED     29222    
unix  3      [ ]         STREAM     CONNECTED     30420    
unix  3      [ ]         DGRAM                    18639    
unix  3      [ ]         STREAM     CONNECTED     29223    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     20474    
unix  3      [ ]         STREAM     CONNECTED     20726    /run/systemd/journal/stdout
unix  2      [ ]         DGRAM                    14303    
unix  3      [ ]         STREAM     CONNECTED     22122    
unix  2      [ ]         DGRAM                    19439    
unix  3      [ ]         STREAM     CONNECTED     20541    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     17776    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     20806    
unix  3      [ ]         STREAM     CONNECTED     21561    
unix  3      [ ]         STREAM     CONNECTED     18626    
unix  3      [ ]         STREAM     CONNECTED     23830    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     22229    
unix  3      [ ]         STREAM     CONNECTED     21840    
unix  2      [ ]         DGRAM                    20651    
unix  3      [ ]         STREAM     CONNECTED     22237    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     24572    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     20547    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     22233    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     21447    
unix  2      [ ]         DGRAM                    29676    
unix  2      [ ]         DGRAM                    26316    
unix  3      [ ]         STREAM     CONNECTED     21973    
unix  3      [ ]         STREAM     CONNECTED     19230    
unix  3      [ ]         STREAM     CONNECTED     22230    
unix  3      [ ]         STREAM     CONNECTED     21566    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     24571    
unix  3      [ ]         STREAM     CONNECTED     23831    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     22623    
unix  2      [ ]         DGRAM                    22228    
unix  3      [ ]         STREAM     CONNECTED     20795    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     19782    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     20805    
unix  3      [ ]         STREAM     CONNECTED     19291    
unix  3      [ ]         STREAM     CONNECTED     17695    
unix  3      [ ]         STREAM     CONNECTED     20904    
unix  3      [ ]         STREAM     CONNECTED     22626    
unix  3      [ ]         STREAM     CONNECTED     29188    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     25536    
unix  3      [ ]         STREAM     CONNECTED     23036    
unix  3      [ ]         STREAM     CONNECTED     23430    
unix  3      [ ]         STREAM     CONNECTED     20401    
unix  3      [ ]         STREAM     CONNECTED     23019    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     20402    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     24668    
unix  3      [ ]         STREAM     CONNECTED     22238    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     21017    
unix  3      [ ]         STREAM     CONNECTED     22234    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     23972    
unix  3      [ ]         STREAM     CONNECTED     20918    
unix  2      [ ]         DGRAM                    14251    
unix  3      [ ]         STREAM     CONNECTED     22210    
unix  3      [ ]         STREAM     CONNECTED     23040    
unix  3      [ ]         STREAM     CONNECTED     24669    
unix  3      [ ]         STREAM     CONNECTED     23639    
unix  3      [ ]         STREAM     CONNECTED     23431    
unix  3      [ ]         STREAM     CONNECTED     24606    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     22235    /run/dbus/system_bus_socket
unix  2      [ ]         DGRAM                    22625    
unix  3      [ ]         STREAM     CONNECTED     29186    
unix  3      [ ]         STREAM     CONNECTED     25537    /run/dbus/system_bus_socket
unix  3      [ ]         DGRAM                    25319    
unix  3      [ ]         STREAM     CONNECTED     23037    /run/dbus/system_bus_socket
unix  2      [ ]         DGRAM                    20912    
unix  3      [ ]         STREAM     CONNECTED     23050    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     24605    
unix  2      [ ]         STREAM     CONNECTED     23035    
unix  3      [ ]         STREAM     CONNECTED     22351    /run/dbus/system_bus_socket
unix  3      [ ]         DGRAM                    25318    
unix  3      [ ]         STREAM     CONNECTED     23041    /run/dbus/system_bus_socket
unix  2      [ ]         DGRAM                    20403    
unix  3      [ ]         STREAM     CONNECTED     29382    /run/user/1000/bus
unix  3      [ ]         STREAM     CONNECTED     30503    /run/user/1000/bus
unix  3      [ ]         STREAM     CONNECTED     26851    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     22256    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     30507    
unix  3      [ ]         STREAM     CONNECTED     29348    
unix  2      [ ]         DGRAM                    29531    
unix  3      [ ]         STREAM     CONNECTED     30383    
unix  2      [ ]         DGRAM                    29378    
unix  3      [ ]         STREAM     CONNECTED     24280    
unix  3      [ ]         STREAM     CONNECTED     29620    
unix  3      [ ]         STREAM     CONNECTED     30255    
unix  3      [ ]         STREAM     CONNECTED     26299    
unix  3      [ ]         STREAM     CONNECTED     29443    
unix  3      [ ]         STREAM     CONNECTED     24183    /run/dbus/system_bus_socket
unix  2      [ ]         DGRAM                    21100    
unix  3      [ ]         STREAM     CONNECTED     29621    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     30294    
unix  3      [ ]         STREAM     CONNECTED     25509    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     30476    /run/user/1000/bus
unix  3      [ ]         STREAM     CONNECTED     29402    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     25928    
unix  3      [ ]         DGRAM                    16825    
unix  2      [ ]         STREAM     CONNECTED     23636    
unix  3      [ ]         STREAM     CONNECTED     24182    
unix  3      [ ]         STREAM     CONNECTED     29527    
unix  3      [ ]         STREAM     CONNECTED     30385    /run/user/1000/bus
unix  3      [ ]         STREAM     CONNECTED     30466    /run/user/1000/bus
unix  2      [ ]         DGRAM                    28978    
unix  3      [ ]         STREAM     CONNECTED     29526    
unix  3      [ ]         STREAM     CONNECTED     29363    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     29379    
unix  3      [ ]         STREAM     CONNECTED     30384    
unix  3      [ ]         STREAM     CONNECTED     30499    
unix  3      [ ]         STREAM     CONNECTED     29404    
unix  3      [ ]         STREAM     CONNECTED     29578    
unix  3      [ ]         STREAM     CONNECTED     30469    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     27810    
unix  3      [ ]         STREAM     CONNECTED     30500    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     29286    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     24286    
unix  3      [ ]         STREAM     CONNECTED     29538    
unix  3      [ ]         STREAM     CONNECTED     29486    
unix  3      [ ]         DGRAM                    16826    
unix  3      [ ]         STREAM     CONNECTED     29380    
unix  3      [ ]         STREAM     CONNECTED     24301    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     29619    
unix  2      [ ]         DGRAM                    30253    
unix  2      [ ]         DGRAM                    16820    
unix  3      [ ]         STREAM     CONNECTED     30513    /run/user/1000/bus
unix  3      [ ]         STREAM     CONNECTED     29440    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     24287    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     30475    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     29383    /run/user/1000/bus
unix  3      [ ]         STREAM     CONNECTED     24181    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     30502    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     29285    
unix  3      [ ]         STREAM     CONNECTED     24300    
unix  3      [ ]         STREAM     CONNECTED     29536    
unix  3      [ ]         STREAM     CONNECTED     30247    
unix  3      [ ]         STREAM     CONNECTED     30501    
unix  3      [ ]         STREAM     CONNECTED     29439    
unix  3      [ ]         STREAM     CONNECTED     24281    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     30506    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     29243    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     23227    
unix  3      [ ]         STREAM     CONNECTED     30512    
unix  3      [ ]         STREAM     CONNECTED     29537    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     26844    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     30508    /run/user/1000/bus
unix  3      [ ]         STREAM     CONNECTED     30387    /run/dbus/system_bus_socket
unix  3      [ ]         STREAM     CONNECTED     30511    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     26850    
unix  3      [ ]         STREAM     CONNECTED     25322    /run/systemd/journal/stdout
unix  3      [ ]         STREAM     CONNECTED     21371    
```

Jungiuosi prie kaimyno per SSH:
+
```
osboxes@ldvm1:~$ ssh 192.168.10.13
osboxes@192.168.10.13's password: 
Welcome to Ubuntu 20.04.2 LTS (GNU/Linux 5.8.0-43-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

158 updates can be installed immediately.
0 of these updates are security updates.
To see these additional updates run: apt list --upgradable

Your Hardware Enablement Stack (HWE) is supported until April 2025.
*** System restart required ***
Last login: Sat Jul  3 03:12:12 2021 from 192.168.10.14
osboxes@ldvm2:~$ 
```


### Sunkumai ir atsakymai į klausimus


### Duotosios `iptables` komandos aprašymas: `TODO`


##### Pavyzdys


### `iptables` tarsegmentinio ekrano scenarijaus analizė (darbas grupėje)

